{"ast":null,"code":"var _jsxFileName = \"/home/ismael/Escritorio/Portafolio_PW0219_00036818/Laboratorios/Laboratorio11/Register_Client_PW0219/src/components/App.js\";\nimport React from \"react\";\nimport RegisterForm from './RegisterForm';\nimport RegisterTable from './RegisterTable';\nimport API from '../utils/apiURLBase';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      student_list: [],\n      id_counter: 0\n    };\n  }\n\n  componentDidMount() {\n    let options = {\n      headers: {\n        Accept: 'application/json'\n      }\n    };\n    fetch(\"\".concat(API.baseURL, \"/register\"), options).then(res => {\n      return res.json();\n    }).then(data => {\n      console.log(data);\n      this.setState({\n        student_list: data.students\n      });\n    }).catch(err => console.log(\"Ocurrio un error en la conexion\"));\n  }\n\n  handleSubmit(student) {\n    student.datetime = new Date();\n    let options = {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify(student)\n    };\n    fetch(\"\".concat(API.baseURL, \"/register/create\"), options).then(res => {\n      return res.json();\n    }).then(data => {\n      console.log(data);\n      let butter_list = this.state.student_list.slice();\n      this.setState({\n        student_list: butter_list.concat([data.student])\n      });\n    }).catch(err => console.log(\"Ocurrio un error en la conexion\"));\n  }\n\n  handleDelete(student) {\n    let options = {\n      method: \"DELETE\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        id: student._id\n      })\n    };\n    fetch(\"\".concat(API.baseURL, \"/register/delete\"), options).then(res => {\n      return res.json();\n    }).then(data => {\n      console.log(data);\n      let index = this.state.student_list.find(value => {\n        return value._id === student._id;\n      });\n      let buffer_list = this.state.student_list.slice();\n      buffer_list.splice(index, 1);\n      this.setState({\n        student_list: buffer_list\n      });\n    }).catch(err => console.log(\"Ocurrio un error en la conexion\"));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        \"marginTop\": 2 + \"em\",\n        \"marginBottom\": 2 + \"em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(RegisterForm, {\n      onSubmit: student => {\n        this.handleSubmit(student);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(RegisterTable, {\n      list: this.state.student_list,\n      onDelete: student => this.handleDelete(student),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/ismael/Escritorio/Portafolio_PW0219_00036818/Laboratorios/Laboratorio11/Register_Client_PW0219/src/components/App.js"],"names":["React","RegisterForm","RegisterTable","API","App","Component","constructor","props","state","student_list","id_counter","componentDidMount","options","headers","Accept","fetch","baseURL","then","res","json","data","console","log","setState","students","catch","err","handleSubmit","student","datetime","Date","method","body","JSON","stringify","butter_list","slice","concat","handleDelete","id","_id","index","find","value","buffer_list","splice","render"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport RegisterForm from './RegisterForm'\nimport RegisterTable from './RegisterTable'\nimport API from '../utils/apiURLBase'\n\nclass App extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            student_list:[],\n            id_counter:0\n        }\n    }\n\n    componentDidMount()\n    {\n        let options = {\n\n            headers : {\n                Accept : 'application/json'\n            },\n\n        }\n        fetch(`${API.baseURL}/register`,options )\n        .then(res =>{return res.json()})\n        .then(data=>{\n            console.log(data);          \n            this.setState({\n                student_list : data.students\n            });\n        })\n        .catch(err => console.log(\"Ocurrio un error en la conexion\"))\n    }\n\n    handleSubmit(student){\n        student.datetime = new Date();\n        let options ={\n            method : \"POST\",\n            headers : {\n                \"Content-type\" : \"application/json\",\n                Accept: \"application/json\"\n            },\n\n            body :  JSON.stringify(student)\n        }\n\n        fetch(`${API.baseURL}/register/create`,options)\n        .then(res =>{return res.json()})\n        .then(data=>{\n            console.log(data);\n            let butter_list = this.state.student_list.slice();\n          \n            this.setState({\n                student_list :butter_list.concat([data.student]),\n            });\n        })\n        .catch(err => console.log(\"Ocurrio un error en la conexion\"))\n\n        \n    }\n\n    handleDelete(student){\n\n        let options ={\n            method : \"DELETE\",\n            headers : {\n                \"Content-type\" : \"application/json\",\n                Accept: \"application/json\"\n            },\n\n            body :  JSON.stringify({id:student._id})\n        }\n\n        fetch(`${API.baseURL}/register/delete`,options)\n        .then(res =>{return res.json()})\n        .then(data=>{\n            console.log(data);\n\n            let index = this.state.student_list.find(value=>{\n                return value._id === student._id;\n            })\n    \n            let buffer_list = this.state.student_list.slice();\n            buffer_list.splice(index, 1);\n    \n            this.setState({\n                student_list: buffer_list\n            });\n        })\n        .catch(err => console.log(\"Ocurrio un error en la conexion\"))\n    }\n    \n    render(){\n        return (\n            <div className=\"container\" style={{\"marginTop\":2+\"em\", \"marginBottom\":2+\"em\"}}>\n                <RegisterForm \n                    onSubmit = {(student)=>{\n                        this.handleSubmit(student);\n                    }}\n                />\n                <RegisterTable \n                    list={this.state.student_list}\n                    onDelete={(student)=>this.handleDelete(student)}\n                    />\n            </div>\n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}